# Docker postfix + opendkim

## Create container without private key

When private key for opendkim signature is not specified (volume flag `-v`), it will be autogenerated. On generation, DNS TXT setting will be dumped, so you can see it by typing: `docker logs CONTAINER_ID`.

```sh
docker run \
    -d \
    -e DKIM_DOMAIN=example.com \
    -e DKIM_SELECTOR=mail \
    glavich/docker-postfix:latest
```

## Create container with private key

If you already have your own private key for opendkim signature, just add it to container folder: `/etc/opendkim/keys/`. Be sure to name it `SELECTOR.private`.

```sh
docker run \
    -d \
    -e DKIM_DOMAIN=example.com \
    -e DKIM_SELECTOR=mail \
    -v $(pwd)/mail.private:/etc/opendkim/keys/mail.private \
    glavich/docker-postfix:latest
```

### Generate private key with opendkim-genkey

```sh
docker run \
    --rm \
    -v $(pwd):/x \
    glavich/docker-postfix:latest \
    opendkim-genkey \
        -b 1024 \
        -d example.com \
        -D /x \
        -h sha256 \
        -r \
        -s mail \
        -v
```

*More on `opendkim-genkey` options can be read here: http://www.opendkim.org/opendkim-genkey.8.html*
